services:
  mongoib:
    container_name: "mongoIB"
    ports:
      - 27018:27018
    extra_hosts:
      - "host.docker.internal:host-gateway"
    volumes:
      - "mongo_data:/data/db"
      - "mongo_config:/data/configdb"
    networks:
      - mongoCluster
    command:
      - '--auth'
      - '-f'
      - '/etc/mongod.conf'
    environment:
      MONGO_INITDB_ROOT_USERNAME: mongo
      MONGO_INITDB_ROOT_PASSWORD: pass
      MONGO_INITDB_DATABASE: mongoIB
      MONGO_REPLICA_HOST: localhost
      MONGO_REPLICA_PORT: 27018
    build: ./mongoDB


volumes:
  mongo_data:
  mongo_config:

networks:
  mongoCluster:
    driver: bridge